---
title: "Creando una p√°gina web biling√ºe en R"
authors: 
  - admin
  - Natalia Morandeira
  - Yanina Bellini Saibene
date: "2020-12-18"
categories:
  - blogdown
  - hugo
  - Netlify
tags:
  - blogdown
  - hugo
  - Netlify
  - multilingue
image:
  caption: '[Photo by Jaqueline Brandwayn on Unsplash](https://unsplash.com/photos/S8MSj5VzHxQ)'
  focal_point: center
output:
  blogdown::html_page:
    toc: true
    number_sections: false
    toc_depth: 1
---

```{r include = FALSE}
knitr::opts_chunk$set(eval = FALSE, collapse = TRUE, comment = NA, tidy = FALSE)
```

En la [nota anterior](https://pamepairo.netlify.app/post/7-12-2020-motivos-pagina-web/) te comentamos algunas ventajas de tener una p√°gina web personal. Tambi√©n, resumimos en un esquema los 3 partes en las que se puede dividir el proceso. A continuaci√≥n nos explayaremos en cada parte y construiremos la p√°gina web personal.

<img src="images/esquema_1.png" width="90%"/>

# En GitHub: crear un repositorio p√∫blico  

Comenzaremos con la creaci√≥n de un repositorio en GitHub para luego crear un proyecto en RStudio con control de versiones. De esta manera podremos ir registrando todos cambios realizados para crear la p√°gina web. En esta parte, asumimos que ten√©s instalado Git y ten√©s una cuenta en GitHub. Si no es el caso, pod√©s instalarte Git [desde esta p√°gina](https://git-scm.com/downloads) y hacerte una cuenta en Github [aqu√≠](https://github.com/). Si est√°s realizando tus primeros pasos en Git, en este [nota](https://yabellini.netlify.app/es/post/githubconr/) encontrar√°s m√°s informaci√≥n que te ayudar√° a incursionarte en Git.^[Para informaci√≥n mas detallada sobre el uso de Git te sugerimos consultar el libro de Jenny Bryan (en ingl√©s), [_Happy Git and GitHub for UseR_](https://happygitwithr.com/)]

Vamos a comenzar creando un nuevo repositorio p√∫blico en nuestra cuenta de GitHub, siguiendo los pasos que figuran a continuaci√≥n.

<img src="images/repo.png" width="90%"/>

Para ello, no es necesario que el nombre del repositorio sea el nombre del dominio de la p√°gina web. Por √∫ltimo, copiamos el URL HTTPS de nuestro repositorio para clonarlo en RStudio.

<img src="images/repo1.png" width="90%"/>

# En RStudio: nuevo proyecto, la instalaci√≥n de `blogdown` y _Hugo_. La configuraci√≥n biling√ºe.

Continuamos creando un proyecto con control de versiones utilizando la URL HTTPS del repositorio creado. *File > New Project > Version Control > Git*.

En el proyecto ya creado, proseguimos con la descarga del paquete `blogdown`.

```{r instalaci√≥n blogdown,eval=FALSE, echo=TRUE}
install.packages(blogdown)
```

Una vez instalado `blogdown`, procedemos con la instalaci√≥n de _Hugo_, de la siguiente manera:

```{r hugo, eval=FALSE, echo=TRUE}
blogdown::install_hugo()
```

_Hugo_ es el generador de sitios est√°ticos en el que se basa `blogdown`. En su [p√°gina web](https://themes.gohugo.io/) se pueden encontrar una gran variedad de plantillas de sitios web. Por ejemplo, la plantilla **academic** tiene varias utilidades interesantes para p√°ginas webs acad√©micas. 

Ahora vamos a instalar a modo de ejemplo la plantilla **academic**

```{r hugo academic, eval=F, echo=TRUE}
library (blogdown)

blogdown::new_site(theme = "wowchemy/starter-academic", theme_example = TRUE)# en theme se debe colocar el nombre de la plantilla de hugo elegida 
```

Luego de esperar pocos minutos para la instalaci√≥n de todas las carpetas y archivos que conforman la plantilla **academic**, obtendremos la primera versi√≥n de nuestro sitio web.

## Personalizando tu sitio web 

Si ten√©s instalada la √∫ltima versi√≥n de `blogdown`, la plantilla se previsualizar√° de forma autom√°tica en el panel _Viewer_.  En cambio, si ten√©s una versi√≥n anterior, entonces hay que ejecutar las siguiente linea de c√≥digo para tener un visualizaci√≥n del sitio web localmente.


```{r remedy03, eval=FALSE, echo=TRUE}

blogdown::serve_site()
blogdown::stop_server()# para dejar de visualizar el contenido generado

```

Veremos lo siguiente en _Viewer_ ( o en un navegador):

<img src="images/hugo-academic.png" width="90%"/>

Ya tenemos nuestra p√°gina web, ahora lo que queda es reemplazar la informaci√≥n de la p√°gina por la nuestra y organizarla seg√∫n nuestros intereses. A medida que modifiquemos cada archivo vamos a poder visualizar autom√°ticamente los cambios en el _Viewer_ y o en el navegador.

A continuaci√≥n se muestra los principales archivos y carpetas que constituyen la p√°gina web.

```
‚îú‚îÄ‚îÄ config.toml       
`r emo::ji("folder")`‚îÄ‚îÄ config/default
   ‚îú‚îÄ‚îÄ menus.toml     
   ‚îú‚îÄ‚îÄ params.toml    
   ‚îî‚îÄ‚îÄ languages.toml
`r emo::ji("folder")`‚îÄ‚îÄ content
`r emo::ji("folder")`‚îÄ‚îÄ themes
```

En el archivo _**config.toml**_ se encuentran los metadatos de nuestra p√°gina. Dentro de este archivo modificaremos el t√≠tulo de la p√°gina web y la URL.

Dentro de la carpeta ___config/_default___ se encuentran tres archivos.toml que definen la configuraci√≥n de la p√°gina web.

+ _**params.toml**_: combinaci√≥n de colores de la p√°gina (_theme_)^[Se pueden elegir otros _themes_  [aqu√≠](https://wowchemy.com/docs/customization/) o si te anim√°s podes crearte el tuyo], tama√±o de la letra (_font_size_). En este archivo tambi√©n se agrega la informaci√≥n de contacto (email, direcci√≥n laboral, cuenta de twitter, GitHub, ResearchGate).

+ _**menus.toml**_: opciones del men√∫ de navegaci√≥n (Notas, Proyectos, Cursos, Publicaciones, etc). Podr√°s cambiar los nombres o quitar aquellas opciones que no quer√©s que aparezcan.

+ _**languages.toml**_: se define el o los idiomas del sitio web.

En la carpeta _content_ se localiza el contenido de nuesta p√°gina web en subcarpetas. Por ejemplo, si se quiere cambiar la informaci√≥n de la biografia, hay que seguir la siguiente ruta _content > authors > admin_ y modificar el archivo _index.md_. Podremos cambiar la foto de la p√°gina reemplazando _**avatar.jpg**_ por una foto nuestra.

```
`r emo::ji("folder")`‚îÄ‚îÄ content
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`authors     
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`courses
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`home
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`post
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`project
   ‚îî‚îÄ‚îÄ `r emo::ji("folder")`publication
```

Desde **_content/home_** se podr√°n activar y editar cada una de las opciones del men√∫ de navegaci√≥n (widgets) de la p√°gina web. Para que se visualice el widget, es necesario que aparezca _active= true_

## Configuraci√≥n de la p√°gina web biling√ºe

Para configurar el sitio web en dos idiomas (espa√±ol e ingl√©s a modo de ejemplo) tenemos que crear dos subcarpetas llamadas _en_ y _es_ dentro de la carpeta _content_. Las nuevas subcarpetas deben tener cada una el contenido que hab√≠a previamente en la carpeta _content_.^[En el caso de que se elijan otros idiomas, las subcarpetas a crearse deben respetar las siglas seg√∫n se muestra [aqu√≠](https://www.w3schools.com/tags/ref_language_codes.asp)]

```
`r emo::ji("folder")`‚îÄ‚îÄ content
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`- es     <- Espa√±ol
   ‚îú‚îÄ‚îÄ `r emo::ji("folder")`- en     <- Ingl√©s
    
```
Luego, en el archivo _**languages.toml**_ descomentar y agregar las siglas del segundo idioma e indicar la carpeta donde est√° su contenido.


```{r, eval= FALSE, echo=TRUE}

[en]
  languageCode = "en-us"
  contentDir = "content/en"  # Uncomment for multi-lingual sites, and move English content into `en` sub-folder.
  title = "English site"

# Uncomment the lines below to configure your website in a second language.
[es]
 languageCode = "es"
 contentDir = "content/es"
  title = "Sitio en espa√±ol"

  [es.params]
   description = "Sitio en espa√±ol"
  [[es.menu.main]]
    name = "es"
    url = "#about"
    weight = 1
```

Adem√°s, se deben crear dos nuevos archivos _**menus.es.toml**_ y _**menus.en.toml**_. 

```
`r emo::ji("folder")`‚îÄ‚îÄ config/default
   ‚îú‚îÄ‚îÄ menus.es.toml     <- Espa√±ol
   ‚îú‚îÄ‚îÄ menus.en.toml     <- Ingl√©s
   ‚îú‚îÄ‚îÄ params.toml    
   ‚îî‚îÄ‚îÄ language.toml    
```

Finalmente en _**config.toml**_ debemos elegir el idioma por defecto del sitio web. Por ejemplo si queremos que quede en espa√±ol _defaultContentLanguage = ‚Äúes"_

Para visibilizar que la p√°gina web es biling√ºe, conviene ir a _**params.toml**_ y verificar que en _show_language_ diga TRUE.

<img src="images/params.png" width="90%"/>

# Publicar tu p√°gina web en internet (Deploy)

Una vez que la p√°gina web este editada de acuerdo a nuestros intereses, lo que resta es publicarla y compartirla al resto de la comunidad. Te indicamos dos opciones para ello que difieren en el servicio de host que utilizan. En ambos casos, son servicios gratuitos y permiten tener sitios est√°ticos. En el caso de Netlify, tu p√°gina web tendr√° el siguiente dominio: _nombreweb.netlify.app_ En el caso de Github Pages: _nombreweb.github.io_

**Netlify** y **GitHub pages** son servicios de host en la nube que nos permite tener un sitio est√°tico de forma gratuita y sencilla. Basicamente, ambos se conecta con el repositorio remoto en GitHub para publicar el sitio en la web.

## Utilizando **Netlify** 

Primero debemos poner una copia del archivo _**netlify.toml**_ localizado en  _theme > starter-academic_ en la carpeta base del proyecto. En dicho archivo debemos especificar la versi√≥n utilizada de Hugo. 

```{r, eval=TRUE, echo=TRUE}

blogdown::hugo_version()

```

El archivo _**netlify.toml**_ corregido con la versi√≥n de Hugo deber√≠a quedar as√≠:

```{r, eval= FALSE, echo=TRUE}

[build.environment]
  HUGO_VERSION = "0.78.1" #Aqui va el n√∫mero de tu versi√≥n de Hugo
  HUGO_ENABLEGITINFO = "true"

```

Adem√°s verificamos en el archivo _**config.toml**_ est√© especificado el theme utilizado. En nuestro caso es _starter-academic_.

```{r, eval= FALSE, echo=TRUE}

theme = "starter-academic"

```

Ahora s√≠ podemos publicar nuestra p√°gina web.
Primero, debemos ingresar a la p√°gina de [**Netlify**](https://www.netlify.com/). Cliqueamos en _Sign Up_ y luego en _GitHub_ para conectar **Netlify** con GitHub.

<img src="images/netlify1.png" width="90%"/>

Luego, elegimos el repositorio remoto donde est√° la informaci√≥n de la p√°gina web mediante la siguiente ruta _New site from Git > GitHub_
Obtendr√°s algo similar a la siguiente figura pero autocompletado con tu informaci√≥n.

<img src="images/netlify2.png" width="90%"/>

En opciones avanzadas (_Show advanced_) escribir la versi√≥n de Hugo que utilizaste para crear tu sitio web.

<img src="images/netlify3.png" width="90%"/>

Cliqueamos en _Deploy Site_ y ¬°¬°¬°listo!!! `r emo::ji("party")` Notaremos que **Netlify** asigna aleatoriamente el nombre de la p√°gina web. Para cambiarlo tendremos que ir a _Domain Settings > Options > Edit site name_
Podr√°s editar el contenido de tu p√°gina web sin la necesidad de repetir los pasos anteriores ya que **Netlify** al estar vinculado con GitHub lo actualizar√° autom√°ticamente.

## Utilizando GitHub Pages 

A diferencia de Netlify, este servidor es parte de Github, por lo que no necesitamos conectarnos a una nueva cuenta. Dentro del repositorio remoto debemos ir a _Settings_

<img src="images/githubpages.png" width="100%"/>

Luego, buscamos la secci√≥n de **GitHub Pages** y seleccionamos en la rama (_Branch_) donde se encuentra nuestro contenido web. Tener en cuenta que el dominio de nuestra p√°gina web ser√° el nombre del repositorio, el cual puede ser cambiado despu√©s de haber sido creado.

<img src="images/githubpages2.png" width="90%"/>

Para informaci√≥n m√°s detallada te recomendamos visitar la p√°gina de [**GitHub Pages**](https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/creating-a-github-pages-site#creating-your-site).

üîä ¬°Ahora solo queda que difundas tu sitio a la comunidad!

# Bonus track

Para agregar una nueva nota dentro de la p√°gina web tenemos que ir a _Addins_ y seleccionar _New Post_. Se abrir√° una ventana donde podremos completar la informaci√≥n del t√≠tulo, les autores, etiquetas, fecha, categorias y seleccionar la ubicaci√≥n de la nueva nota.

<img src="images/post.png" width="90%"/>

## En la ultima versi√≥n de `blogdown` 

En el caso de estar trabajando con la √∫ltima versi√≥n de `blogdown`, recomendamos seguir los consejos provistos por [Alison Hill](https://twitter.com/apreshill) en su [presentaci√≥n para L.A. R Users Group](https://alison.netlify.app/larug-download/#1)  para configurar la versi√≥n de Hugo y buenas pr√°cticas para la construcci√≥n de una p√°gina web.

# Fuentes 

+ [_**blogdown: Creating Websites with R Markdown**_](https://bookdown.org/yihui/blogdown/)  Yihui Xie, Amber Thomas, Alison Presmanes Hill

+ [_**Up & Running with blogdown**_](https://alison.rbind.io/post/2017-06-12-up-and-running-with-blogdown/) Alison Presmanes Hill

+ [_**Blogging in R with Blogdown**_](https://www.youtube.com/watch?v=f6kyYjCVAs0) dictado por Rebecca Barter para RLadies- Bucarest 

+ [_**Becoming an R blogger**_](http://www.rebeccabarter.com/blog/2020-02-03_blogger/) Rebecca Barter

+ [_**wowchemy**_](https://wowchemy.com/docs/get-started/)

+ [_**A Spoonful of Hugo: The netlify.toml File**_](https://alison.rbind.io/post/2019-02-19-hugo-netlify-toml/) Alison Presmanes Hill

### ¬øQu√© te pareci√≥ esta nota? Cualquier comentario es bienvenido üòÅ
